<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NFC Sayfa</title>
  <style>
    :root{
      /* üå§ A√áIK TEMA */
      --bg1:#f6f8ff;
      --bg2:#eef2ff;

      --card:rgba(255,255,255,0.82);
      --text:#0f172a;      /* slate-900 */
      --muted:#475569;     /* slate-600 */
      --border:rgba(15,23,42,0.10);
      --shadow:rgba(2,6,23,0.12);
      --glow:rgba(99,102,241,0.18); /* indigo */
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      padding:18px;

      /* a√ßƒ±k, modern */
      background:
        radial-gradient(900px 420px at 20% 15%, rgba(99,102,241,0.14), transparent 60%),
        radial-gradient(700px 340px at 80% 20%, rgba(56,189,248,0.14), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    .card{
      width:min(520px, 100%);
      background:var(--card);
      border:1px solid var(--border);
      border-radius:20px;
      box-shadow:0 18px 55px var(--shadow);
      padding:16px;
      backdrop-filter: blur(12px);
    }

    .photo-frame{
      width:100%;
      height: clamp(340px, 58vh, 560px);
      border-radius:18px;
      border:1px solid rgba(15,23,42,0.10);
      overflow:hidden;

      /* a√ßƒ±k √ßer√ßeve */
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.65));
      box-shadow: 0 14px 34px rgba(2,6,23,0.14);
      padding:10px;

      display:flex;
      align-items:center;
      justify-content:center;
    }

    .photo-frame img{
      width:100%;
      height:100%;
      object-fit: contain;
      object-position:center;
      border-radius:14px;
      display:block;
      user-select:none;
      -webkit-user-drag:none;

      /* foto daha ‚Äúcanlƒ±‚Äù dursun */
      filter: saturate(1.05) contrast(1.02);
    }

    .msg{
      margin:14px 6px 0;
      font-size:1.08rem;
      line-height:1.45;
      color:var(--text);
    }

    .sub{
      margin:8px 6px 0;
      font-size:0.9rem;
      color:var(--muted);
    }

    .row{
      display:flex;
      gap:10px;
      margin-top:12px;
    }

    button{
      flex:1;
      border:1px solid rgba(15,23,42,0.12);
      background: rgba(99,102,241,0.10);
      color: var(--text);
      border-radius:12px;
      padding:10px 12px;
      cursor:pointer;
      font-weight:600;
    }
    button:hover{
      background: rgba(99,102,241,0.16);
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="photo-frame">
      <img id="photo" alt="fotoƒüraf" />
    </div>

    <div class="msg" id="message"></div>
    <div class="sub">Yenileyince yeni mesaj + foto gelir.</div>

    <div class="row">
      <button id="btnNew">Yeni getir</button>
      <button id="btnReset">Listeyi sƒ±fƒ±rla</button>
    </div>
  </div>

  <script>
    // =======================
    //  MEVCUT MANTIƒûI BOZMADAN
    // =======================

    const MESSAGES = [
      "Bug√ºn de seni seviyorum.",
      "Kalbimden ge√ßenler: iyi ki varsƒ±n.",
      "Biraz susup sarƒ±lasƒ±m var.",
      "G√ºl√º≈ü√ºn d√ºnyayƒ± d√ºzeltemiyor ama beni d√ºzeltiyor."
    ];

    const PHOTO_DIR = "assets/yunis/";
    const PHOTO_START = 1;
    const PHOTO_END = 60;

    function pad4(n){ return String(n).padStart(4,"0"); }

    function lsGet(key, fallback){
      try{
        const v = localStorage.getItem(key);
        return v ? JSON.parse(v) : fallback;
      }catch(e){
        return fallback;
      }
    }

    function lsSet(key, value){
      localStorage.setItem(key, JSON.stringify(value));
    }

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }

    function getNextFromPool(poolKey, sourceArray){
      let pool = lsGet(poolKey, null);
      if(!Array.isArray(pool) || pool.length === 0){
        pool = shuffle([...sourceArray]);
      }
      const next = pool.pop();
      lsSet(poolKey, pool);
      return next;
    }

    function resetPool(poolKey){
      localStorage.removeItem(poolKey);
    }

    function nextMessage(){
      return getNextFromPool("msg_pool", MESSAGES);
    }

    function buildPhotoList(){
      const arr = [];
      for(let i=PHOTO_START;i<=PHOTO_END;i++){
        arr.push(PHOTO_DIR + pad4(i) + ".jpg");
      }
      return arr;
    }
    const PHOTO_LIST = buildPhotoList();

    function nextPhoto(){
      return getNextFromPool("photo_pool", PHOTO_LIST);
    }

    function renderNew(){
      const msg = nextMessage();
      const photoPath = nextPhoto();

      document.getElementById("message").textContent = msg;

      const img = document.getElementById("photo");
      img.src = photoPath;
      img.onerror = () => {
        img.onerror = null;
        img.src = PHOTO_DIR + "0001.jpg";
      };
    }

    renderNew();

    document.getElementById("btnNew").addEventListener("click", renderNew);
    document.getElementById("btnReset").addEventListener("click", () => {
      resetPool("msg_pool");
      resetPool("photo_pool");
      renderNew();
    });
  </script>
</body>
</html>
